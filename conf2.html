<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT 융합기술원 - 타운홀 세미나</title>
</head>
<body>
    <video
        id = 'video'
        playsinLine
        webkit-playsinLine
        loop
        autoplay
        width="1290"
        height="760"
        src = "./asset/meta.mp4"
        style="display: none"
    ></video>

    <script type="module">
            import * as THREE from 'https://cdn.skypack.dev/three@0.135.0/build/three.module.js'
            import { OrbitControls } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/controls/OrbitControls.js'
            import { FBXLoader } from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/loaders/FBXLoader.js'
            import Stats from 'https://cdn.skypack.dev/three@0.135.0/examples/jsm/libs/stats.module.js'

            //scene
            const scene = new THREE.Scene();

            //camera
            const camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                0.1,
                20000
            );
            camera.position.set(10,3,36);
            camera.lookAt(0,0,0);

            const renderer = new THREE.WebGLRenderer({antialias: true })
            renderer.setSize(window.innerWidth/2, window.innerHeight/2)
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement)

            let video = document.getElementById("video");
            let videoTexture = new THREE.VideoTexture(video);
            videoTexture.minFilter = THREE.LinearFilter;
            videoTexture.magFilter = THREE.LinearFilter;

            var movieMaterial = new THREE.MeshBasicMaterial({
                map : videoTexture,
                side : THREE.FrontSide,
                toneMapped : false,
            });

            //let movieGeometry = new THREE.BoxGeometry(100,100,100);
            let movieGeometry = new THREE.PlaneGeometry(100,100);
            let movieCubeScreen = new THREE.Mesh(movieGeometry, movieMaterial);
            movieCubeScreen.position.set(0,50,0);
            scene.add(movieCubeScreen);

            camera.position.set(0,150,300);
            camera.lookAt(movieCubeScreen.position);


            const controls = new OrbitControls(camera, renderer.domElement);
            animate();

            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                videoTexture.needsUpdate = true;
                renderer.render(scene, camera);
            }

            document.onkeydown = function(e) {
                if (e.keyCode === 49) { video1.play(); } 
                else if (e.keyCode === 50) { video2.play(); } 
                else if (e.keyCode === 32) {
                    //space
                    video1.pause();
                    video2.pause();
                } else if (e.keyCode === 83) {
                    //s
                    video1.stop();
                    video2.stop();
                } else if (e.keyCode === 82) {
                    //r
                    video1.currentTime = 0;
                    video2.currentTime = 0;
                }
            }


            


    </script>
</body>
</html>